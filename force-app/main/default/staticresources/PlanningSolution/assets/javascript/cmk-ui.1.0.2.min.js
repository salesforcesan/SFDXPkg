(function(a){Date.prototype.isValid=function(){return Object.prototype.toString.call(this)==="[object Date]"&&isFinite(this)};Date.prototype.format=function(b){return b==="/"?[this.getMonth()+1,this.getDate(),this.getFullYear()].join("/"):this.toISOString()};String.prototype.toDate=function(){var e,d,c,b;if(!this){return null}b=this.split("/");if(b.length!==3){return null}d=parseInt(b[2]);e=parseInt(b[0])-1;c=parseInt(b[1]);return new Date(d,e,c,0,0,0,0)};a.module("cmk.system.async",[]).factory("cmkSystemAsync",["$q",function(c){function d(g,f){if(!!f){var e=[];g.forEach(function(h){var i={};_.forEach(f,function(j){i[j]=h.get(j)||"-"});e[e.length]=i});return e}else{return g}}function b(){}b.prototype.call=function(h,f,e){var g=c.defer();if(!!f){h(f,function(k,i,j){if(k){g.reject(k)}else{if(!!j){g.resolve(d(i,e),j)}else{g.resolve(d(i,e))}}})}else{h(function(k,i,j){var l;if(k){g.reject(k)}else{l=(e.length===0)?i[0]:d(i,e);if(!!j){g.resolve(l)}else{g.resolve(l,j)}}})}return g.promise};b.prototype.remoting=function(g,f){var h=c.defer();function e(i,j){if(j.status){h.resolve(i)}else{if(j.type==="exception"){h.reject([j.message,j.where].join("\r\n"))}else{h.reject(j.message)}}}if(!!f){Visualforce.remoting.Manager.invokeAction(g,f,e)}else{Visualforce.remoting.Manager.invokeAction(g,e)}return h.promise};return new b()}])})(angular);(function(a){a.module("cmk.ui.dropdown.area",["cmk.web.context","ngSanitize"]).directive("cmkDropdownArea",["cmkWebContext","$log",function(b,d){var c=b.staticResourcePath;return{restrict:"EA",transclude:true,require:["cmkDropdownArea"],scope:{width:"=",title:"@",alignment:"@",onInit:"&onInit",placeHolder:"@placeholder",cssclass:"@",icon:"@"},controller:"DropdownAreaController",template:function(){return'<div aria-expanded="{{uiModel.isHidden === false}}" class="slds-picklist"><button class="slds-button slds-button--icon-more {{cssclass}} slds-truncate" ng-click="wantToSelect($event)" ng-blur="onBlur()" aria-haspopup="true"><svg aria-hidden="true" class="slds-button__icon"><use xlink:href="{{icon}}"></use></svg></button><div class="slds-dropdown slds-dropdown--small slds-dropdown--nubbin-top slds-dropdown--menu {{uiModel.alignment}} cm-dropdown" ng-style="uiModel.lookupPostionStyle" ng-hide="uiModel.isHidden"><div class="cm-dropdown-area" ng-mouseover="onMouseOver()" ng-mouseleave="onMouseLeave()"><div class="cm-article"><header class="slds-clearfix"><div class="slds-float--left"><h2 class="slds-text-heading--label slds-text-heading--large cm-article-title">{{uiModel.title}}</h2></div><div class="slds-float--right cm-float-right"><button title="Close" ng-click="onClose()" class="slds-button slds-button--icon-border slds-button--icon-border-small"><svg aria-hidden="true" class="slds-button__icon slds-button__icon--small cm-icon"><use xlink:href="'+c+'/assets/icons/utility-sprite/svg/symbols.svg#close"></use></svg><span class="slds-assistive-text">Close</span></button></div></header></div><ng-transclude></ng-transclude></div></div></div>'}}}]).controller("DropdownAreaController",["$scope","$log",function(f,h){var d=this,g=0,i=1,c=f,b=!!c.width?c.width:200,e=c.uiModel={isHidden:true,title:c.title,alignment:"slds-dropdown--"+(c.alignment||"left"),lookupPostionStyle:{width:b}};if(!!c.alignment&&c.alignment==="right"){e.alignment="slds-dropdown--right"}c.wantToSelect=function(j){e.isHidden=!e.isHidden;if(i&&!!c.onInit&&!e.isHidden){i=0,c.onInit()}};c.onBlur=function(){if(g===0){e.isHidden=true}};c.onMouseOver=function(){g=1};c.onMouseLeave=function(){g=0};c.onClose=function(){g=0;c.onBlur()}}])})(angular);(function(a){function b(e,c){var d=e.menuItems,f;if(!!c){d.forEach(function(g){if(g.key===c){f=g;g.selected=1;g.cssSelected="slds-is-selected"}else{g.cssSelected="";g.selected=0}})}else{d.forEach(function(g){if(g.selected===1){f=g;g.cssSelected="slds-is-selected"}else{g.cssSelected=""}})}if(!!e.setSelectIcon&&!!f){e.buttonUrl=f.leftIconUrl||f.rightIconUrl}}a.module("cmk.ui.dropdown",["cmk.web.context"]).directive("cmkDropdown",["cmkWebContext","$log",function(c,e){var d=c.staticResourcePath;return{restrict:"EA",transclude:true,scope:{alignment:"@",onClicked:"&onClicked",model:"=datasource",cssclass:"@"},controller:"DropdownListController",template:function(f,g){return'<div class="slds-dropdown-trigger {{cssclass}}" aria-haspopup="true"><button class="slds-button slds-button--icon-more" aria-haspopup="true"><svg aria-hidden="true" class="slds-button__icon"><use xlink:href="{{model.buttonUrl}}"></use></svg><span class="slds-assistive-text">{{model.helpText}}</span><svg aria-hidden="true" class="slds-button__icon slds-button__icon--x-small"><use xlink:href="'+d+'/assets/icons/utility-sprite/svg/symbols.svg#down"></use></svg></button><div class="slds-dropdown slds-dropdown--nubbin-top {{uiModel.alignment}} slds-dropdown--small slds-dropdown--menu"><div class="slds-dropdown__header" ng-hide="angular.isUndefined(model.title)"><span class="slds-text-heading--label">{{model.title}}</span></div><ul class="slds-dropdown__list" role="menu"><li data-id="{{item.key}}" ng-disabled="item.disabled === 1" ng-repeat="item in model.menuItems" aria-selected="{{item.selected === 1}}" class="slds-dropdown__item slds-has-icon--left" ng-class="item.cssSelected" role="menuitem option" tabindex="0"><a href="#{{item.key}}" tabindex="-1" aria-disabled="{{item.disabled === 1}}"><svg ng-if="!!item.leftIconUrl" aria-hidden="true" class="slds-icon slds-icon--small slds-icon--left"><use xlink:href="{{item.leftIconUrl}}"></use></svg><svg aria-hidden="true" ng-if="model.showSelectIcon && item.selected" class="slds-icon slds-icon--small slds-icon--left"><use xlink:href="'+d+'/assets/icons/standard-sprite/svg/symbols.svg#task2"></use></svg><span>{{item.value}}</span><svg ng-if="!!item.rightIconUrl" aria-hidden="true" class="slds-icon slds-icon--small slds-icon--right"><use xlink:href="{{item.rightIconUrl}}"></use></svg></a></li></ul></div></div>'},link:function(i,h,g,f){h.on("click","a",function(j){j.preventDefault();var k=a.element(this).parent("li").attr("data-id");b(i.model,k);i.$digest();f.onSelect(k)})}}}]).controller("DropdownListController",["$scope","$log",function(e,f){var d=this,c=e;c.uiModel={alignment:""};b(c.model);if(!!c.alignment){if(c.alignment==="left"){c.uiModel.alignment="slds-dropdown--left"}else{if(c.alignment==="right"){c.uiModel.alignment="slds-dropdown--right"}}}d.onSelect=function(g){if(!!c.onClicked){c.onClicked({key:g})}}}])})(angular);(function(a){a.module("cmk.ui.lookup",["cmk.web.context","ngSanitize"]).directive("cmkLookup",["cmkWebContext","$timeout","$log",function(b,c,e){var d=b.staticResourcePath;return{restrict:"EA",transclude:true,require:["cmkLookup","^ngModel"],scope:{model:"=datasource",onChanged:"&onChanged",onLookup:"&onLookup",onSelRow:"&onSelRow",cssclass:"@",required:"@",alignment:"@",placeholder:"@placeholder",error:"@",width:"@",height:"@",layout:"@",icon:"@",columns:"@"},controller:"LookupController",template:function(){var f='<div class="slds-lookup cm-lookup" data-select="single" data-scope="single" data-typeahead="true"><div class="slds-form-element"><div class="slds-lookup__control slds-input-has-icon slds-input-has-icon--right cm-input-lookup {{cssclass}}" ng-click="wantToLookup($event)"><svg aria-hidden="true" class="slds-input__icon cm-input-icon"><use xlink:href="'+d+'/assets/icons/utility-sprite/svg/symbols.svg#search"></use></svg><input style="width: 400px;" ng-model="model.selRow.value" ng-keyup="keyClicked($event)" ng-blur="onBlur()" data-id="{{model.selRow.key}}" class="slds-input" required="required" ng-if="required == 1" type="text" aria-label="lookup" aria-haspopup="true" aria-autocomplete="list" role="combobox" value="{{model.selRow.value}}" placeholder="{{placeholder}}"/><input ng-model="model.selRow.value" ng-keyup="keyClicked($event)" ng-blur="onBlur()" data-id="{{model.selRow.key}}" class="slds-input" style="width: 400px;" ng-if="required == 0" type="text" aria-label="lookup" aria-haspopup="true" aria-autocomplete="list" role="combobox" value="{{model.selRow.value}}" placeholder="{{placeholder}}"/><span ng-if="required == 1" class="slds-form-element__help">{{error}}</span></div></div><div class="slds-lookup__menu cm-lookup-menu" ng-style="uiModel.lookupPostionStyle" ng-hide="uiModel.isHidden" role="listbox"><div ng-if="layout == 0" class="cm-lookup-ul" ng-mouseover="onMouseOver()" ng-mouseleave="onMouseLeave()"><ul ng-if="layout == 0" class="cm-lookup-list" role="presentation"><li class="slds-lookup__item slds-truncate" role="presentation" ng-repeat="row in model.rowset"><a href="#" role="option" data-id="{{row[uiModel.idField]}}"><svg aria-hidden="true" ng-if="icon !== undefined" class="slds-icon slds-icon-standard-account slds-icon--small"><use xlink:href="{{icon}}"></use></svg><span ng-bind-html="row[uiModel.fields[0]]"></span></a></li></ul></div><div class="cm-lookup-table" ng-if="layout == 1" ng-mouseover="onMouseOver()" ng-mouseleave="onMouseLeave()" ><table ng-if="layout == 1" class="slds-table slds-tble--bordered slds-table--striped cm-table-border-no-top"><thead><tr class="slds-text-heading--label"><th scope="col" ng-repeat="col in uiModel.fields" class="slds-truncate"><span>{{col}}</span></th></tr></thead><tbody><tr ng-repeat="row in model.rowset" data-id="{{row[uiModel.idField]}}"><td ng-repeat="col in uiModel.fields" class="slds-truncate"><span ng-bind-html="row[col]"></span></td></tr></tbody></table></div></div></div>';return f},link:function(k,j,g,l){var i,f=k.layout==="1"?"div.cm-lookup-table":"div.cm-lookup-ul",h=(!!k.height)?k.height+"px":"300px";i=c(function(){j.find(f).slimScroll({position:"right",color:"#666",railColor:"#ccc",railVisible:true,size:"10px",height:h,alwaysVisible:true})},10);j.on("$destroy",function(){c.cancel(i)});j.on("click","table > tbody > tr",function(m){m.preventDefault();var n=a.element(this).attr("data-id");l[0].selectRow(n)});j.on("click","ul > li > a",function(m){m.preventDefault();var n=a.element(this).attr("data-id");l[0].selectRow(n)});l[0].setModelController(l[1]);k.$watch("model.selRow.value",function(n,m){if(n!=m){if(!k.model.selRow){k.model.selRow={key:"",value:""}}l[0].lookup(k.model.selRow.value)}})}}}]).controller("LookupController",["$scope","$log",function(i,j){var g=this,b=i,c,h={},k=(i.columns||"key,value").split(",");function d(){var l=b.model||{};h.isMouseOver=0;h.isHidden=true;h.required=b.required==="1"?"required":"";h.idField=k[0];h.fields=k.slice(1);h.alignment=b.alignment;h.width=b.width||"";h.isEmptyChanged=0;b.uiModel=h;if(!l.selRow||!l.selRow.value){l.selRow={key:"",value:""}}if(!l.rowset){l.rowset=[]}b.model=l}d();g.setModelController=function(l){c=l};function f(p){var l,m=k[0],o=b.model.rowset;for(var n=0;n<o.length;n++){if(o[n][m]==p){l=o[n];break}}return l||{}}g.selectRow=function(n){var m,l=f(n);b.$apply(function(){m=b.onSelRow({row:l})||l[k[1]];if(m.indexOf("&")!==-1){m=a.element("<span></span>").html(m).text()}b.model.selRow={key:l[k[0]],value:m};c.$setViewValue(b.model.selRow.key);h.isHidden=true;h.isMouseOver=0});h.isEmptyChanged=1;if(!!b.onChanged){b.onChanged()}};function e(){h.isEmptyChanged=0;b.model.selRow.key="";c.$setViewValue("");if(!!b.onChanged){b.onChanged()}}b.onBlur=function(){if(h.isMouseOver===0){h.isHidden=true}if(h.isEmptyChanged===1){if(!b.model.selRow.value){e()}}};g.lookup=function(l){if(!!b.onLookup){b.onLookup({keyword:l})}else{j.log("[Warning]: No on-lookup attribute is defined on the UI component.")}};b.keyClicked=function(l){switch(l.keyCode){case 27:h.isMouseOver=0;h.isHidden=true;break;case 13:h.isHidden=false;break}};b.wantToLookup=function(m){var l,o,n=a.element(m.currentTarget);m.preventDefault();h.isHidden=!h.isHidden;if(h.isHidden){return}o=n.width();l={top:n.height(),left:0};if(!h.alignment){l.width=o+"px"}else{if(h.alignment==="left"){if(!!h.width){l.width=h.width+"px"}}else{if(h.alignment==="right"){if(!!h.width){l.width=h.width+"px";if(parseInt(h.width)>o){l["margin-left"]=(o-parseInt(h.width))+"px"}}else{l.width=o+"px"}}}}h.lookupPostionStyle=l;n.find("input").select();g.lookup("")};b.onMouseOver=function(){h.isMouseOver=1};b.onMouseLeave=function(){h.isMouseOver=0}}])})(angular);(function(a){a.module("cmk.ui.pagelet",["cmk.web.context","ngSanitize"]).directive("cmkPagelet",["$timeout","$log","$window",function(b,c,d){return{restrict:"EA",transclude:true,scope:{model:"=options",onResize:"&onResize",onNavbarClick:"&navbarClick",onFooterLinkClick:"&footerClick"},require:["cmkPagelet"],controller:"PageletController",template:function(e,f){return'<article class="cm-article"><header class="slds-clearfix"><div class="slds-float--left"><h2 class="slds-text-heading--label slds-text-heading--large cm-article-title" ng-bind-html="uiModel.title"></h2></div><div class="slds-float--right"><div class="cm-widget-hdr-group" ng-bind-html="uiModel.toolbarHTML"></div></div></header><div class="cm-article-body"><ng-transclude></ng-transclude></div><footer class="cm-article-footer" ng-if="!!uiModel.footerHTML" ng-bind-html="uiModel.footerHTML"></footer></article>'},link:function(i,h,f,j){var g,e="div.ui-grid-viewport";h.on("click","header a",function(l){l.preventDefault();var k=a.element(this).attr("href");if(k==="#_sys_expand"){j[0].resize(a.element(this));h.find(e).slimScroll({scrollTo:"0px",railVisible:true,alwaysVisible:true});h.find(e).focus()}else{i.onNavbarClick({href:k})}});g=b(function(){h.find(e).slimScroll({position:"right",color:"#666",railColor:"#ccc",railVisible:true,height:i.uiModel.height+"px",size:"10px",alwaysVisible:true})},10)}}}]).controller("PageletController",["$scope","$log","cmkWebContext",function(i,j,e){var f=this,c,b=i,g=b.uiModel={};function d(k){return['<a href="#',k.id,'" title="',k.text,'" class="slds-button slds-button--icon-border-filled cm-widget-hdr-button">','<svg aria-hidden="true" class="slds-button__icon slds-button__icon--small cm-icon">','<use xlink:href="',k.iconUrl,'"></use></svg><span class="slds-assistive-text">',k.text,"</span></a>"].join("")}function h(){var k=b.model,l=[];g.title=k.title,g.height=k.height;k.navBars.forEach(function(m){l.push(d(m))});if(!!k.canExpand&&k.canExpand){l.push(d({id:"_sys_expand",text:"Zoom In & Out",iconUrl:e.staticResourcePath+"/assets/icons/utility-sprite/svg/symbols.svg#expand"}))}g.toolbarHTML=l.join("");g.footerHTML=k.footerHTML||""}h();f.resize=function(m){var l=a.element("body").hasClass("cm-body-full-screen");var k=g.height+50;var n=m.parents(".cm-col-container");n.toggleClass("cm-widget-full-screen");a.element("body").toggleClass("cm-body-full-screen");if(!l){k=n.height()-n.find("header").outerHeight(true)-n.find(".cm-article-footer").outerHeight(true)}n.find(".cm-article-body").height(k);if((n.find(".ui-grid-viewport").html()+"").length>0){n.find(".ui-grid-viewport").height(k-40).parent("div").height(k-40)}b.onResize({height:k})}}])})(angular);(function(a){var c=0;function b(){return"_busyIndicator_"+c++}a.module("cmk.ui.busyindicator",["cmk.web.context","ngSanitize"]).directive("cmkBusyIndicator",["cmkWebContext","$log",function(d,f){var e=d.staticResourcePath;return{restrict:"EA",scope:{model:"=model"},controller:"BusyIndicatorController",template:function(){return'<div id="{{uiModel.id}}"><div aria-hidden="false" role="dialog" class="slds-modal slds-fade-in-open" style="position:absolute;"><div class="slds-modal__container"><div class="slds-container--center"><div class="{{uiModel.css}}"><img src="{{uiModel.icon}}" alt="Loading..." /></div></div></div></div><div class="cm-backdrop cm-backdrop--open"></div></div>'}}}]).controller("BusyIndicatorController",["$scope","cmkWebContext",function(d,f){var g={},e=d.model;g.id=e.id||getnextId();g.css=e.css||"slds-spinner--medium";g.icon=f.staticResourcePath+(e.icon||"/assets/images/spinners/slds_spinner_brand.gif");d.uiModel=g}]);a.module("cmk.ui.busyIndicatorService",["cmk.ui.busyindicator"]).factory("cmkBusyIndicatorService",["$compile",function(e){var i=b(),d,h=i+"Model";function f(j,l){var m,k={id:i,css:l.css,icon:l.icon,containerId:l.containerId||"body > div.slds"};d=j;j[h]=k;m=a.element(['<cmk-busy-indicator model="',h,'"></cmk-busy-indicator>'].join(""));a.element(k.containerId).append(m);e(m)(j)}function g(){if(!!d){a.element(d[h].containerId).find("cmk-busy-indicator").remove()}}return{show:f,hide:g}}])})(angular);(function(a){function b(e){var d;if(!e){return""}d=["slds-theme--",e.toLowerCase()].join("");return _.find(["slds-theme--error","slds-theme--warning","slds-theme--success"],function(f){return f===d})||""}function c(e){var d;if(!e){return"info"}d=e.toLowerCase();return _.find(["error","warning","success"],function(f){return f===d})||"info"}a.module("cmk.ui.toast",["cmk.web.context","ngSanitize"]).directive("cmkToast",["cmkWebContext",function(d){var e=d.staticResourcePath;return{restrict:"EA",scope:{model:"=model"},template:function(){return'<div class="slds-notify-container"><div class="slds-notify slds-notify--toast {{uiModel.cssTheme}}" role="alert"><span class="slds-assistive-text" data-reactid=".c.4.0.0">Error</span><button class="slds-button slds-button--icon-inverse slds-notify__close" ng-click="onClose($event)" ><svg aria-hidden="true" class="slds-button__icon slds-button__icon--large cm-svg-fill-white"><use xlink:href="" ng-href="{{uiModel.staticResource}}/assets/icons/utility-sprite/svg/symbols.svg#close"></use></svg><span class="slds-assistive-text">Close</span></button><div class="notify__content slds-grid"><svg aria-hidden="true" class="slds-icon slds-icon--small slds-m-right--small slds-col slds-no-flex"><use xlink:href="" ng-href="{{uiModel.staticResource}}/assets/icons/utility-sprite/svg/symbols.svg#{{uiModel.iconType}}"></use></svg><div class="slds-col slds-align-middle"><h2 class="slds-text-heading--small">{{uiModel.title}}</h2><div ng-bind-html="uiModel.content" /></div></div></div></div>'},controller:"ToastController"}}]).controller("ToastController",["$scope","cmkWebContext","$timeout",function(d,f,g){var h,e=d.model||{};h={};h.iconType=c(e.messageType);h.cssTheme=b(e.messageType);h.staticResource=f.staticResourcePath;h.cssTheme=b(e.messageType);h.title=e.title||"Toast Title Place Holder";h.content=e.content||"Toast Body Content Place Holder";d.uiModel=h;d.onClose=function(i){var j=a.element(i.currentTarget).parents("cmk-toast");j.fadeOut(250,function(){j.remove()})};if(e.autoHide===true){g(function(){var i=a.element("body").find("div.slds > cmk-toast");if(!!i){i.fadeOut(500,function(){i.remove()})}},5000)}}]);a.module("cmk.ui.toastService",["cmk.ui.toast"]).factory("cmkToastService",["$compile",function(i){var f,h,d,g="div.slds > cmk-toast";function j(k,l){f={};h=[];d=a.element("body").find(g);l=l||{};if(!!d){d.remove()}f.messageType=l.messageType||"info";f.autoHide=l.autoHide||false;f.title=l.title||"Notification";f.content=l.content||"<p>Notification Detail</p>";k.__toastModel=f;var m=a.element('<cmk-toast model="__toastModel"></cmk-toast>');a.element("body").find("div.slds").append(m);i(m)(k)}function e(){d=a.element("body").find(g);if(!!d){d.fadeOut(250,function(){d.remove()})}}return{show:j,hide:e}}])})(angular);(function(a){a.module("cmk.ui.dialog",["cmk.web.context","ngSanitize"]).directive("cmkDialog",["cmkWebContext",function(b){var c=b.staticResourcePath;return{restrict:"EA",transclude:true,scope:{model:"=model"},template:function(){return'<div class="cm-dialog-container cm-hide"><div aria-hidden="false" role="dialog" class="slds-modal{{uiModel.cssModal}}slds-fade-in-open cm-hide"><div class="slds-modal__container"><div class="slds-modal__header" style="text-align: left"><h2 class="slds-text-heading--medium">{{model.header}}</h2><button class="slds-button slds-button--icon-inverse slds-modal__close" ng-click="onClose()"><svg aria-hidden="true" class="slds-button__icon slds-button__icon--large"><use xlink:href="'+c+'/assets/icons/action-sprite/svg/symbols.svg#close"></use></svg><span class="slds-assistive-text">Close</span></button></div><div class="slds-modal__content"><ng-transclude></ng-transclude></div><div class="slds-modal__footer"><button ng-repeat="btn in uiModel.buttons" class="slds-button slds-button--neutral{{btn.css}}" value="{{btn.value}}" ng-click="btn.onClick($event)">{{btn.label}}</button></div></div></div><div class="slds-modal-backdrop slds-modal-backdrop--open cm-hide"></div></div>'},controller:"DialogController",link:function(g,f,e,d){g.$watch("model.showDialog",function(i,h){if(i!=h){f.find(".cm-dialog-container").toggleClass("cm-hide");f.find(".slds-modal").toggleClass("cm-hide");f.find(".slds-modal-backdrop").toggleClass("cm-hide")}});f.bind("keydown",function(h){d.onKeyPress(h)})}}}]).controller("DialogController",["$scope",function(c){var b=this;function d(){c.model.showDialog=false}c.uiModel={cssModal:c.model.isLargeModal===1?" slds-modal--large ":" ",buttons:_.map(c.model.buttons,function(e){return{label:e.label,value:e.value,css:e.isPrimary===1?" slds-button--brand":"",onClick:e.onClick||function(f){console.log(f)}}})};c.onClose=function(){d()};b.onKeyPress=function(e){var f=e.which||e.keyCode;if(f===27){c.$apply(function(){d()});e.preventDefault()}}}])})(angular);(function(a){a.module("cmk.ui.picklist",["cmk.web.context","ngSanitize"]).directive("cmkPicklist",["cmkWebContext","$log",function(b,d){var c=b.staticResourcePath;return{restrict:"EA",transclude:true,require:["cmkPicklist","^ngModel"],scope:{width:"=",alignment:"@",placeHolder:"@placeholder",onChanged:"&onChanged",model:"=datasource",cssclass:"@"},controller:"PickListController",template:function(){return'<div aria-expanded="{{uiModel.isHidden === false}}" class="slds-picklist"><button class="slds-button slds-button--neutral slds-picklist__label {{cssclass}} slds-truncate" ng-blur="onBlur()" data-id="{{model.option.key}}" ng-click="wantToSelect($event)" aria-haspopup="true"><span ng-bind-html="model.option.value"></span><svg aria-hidden="true" class="slds-icon"><use xlink:href="'+c+'/assets/icons/utility-sprite/svg/symbols.svg#down"></use></svg></button><div class="slds-dropdown slds-dropdown--small slds-dropdown--menu {{uiModel.alignment}} cm-dropdown-menu" ng-hide="uiModel.isHidden"><ul class="slds-dropdown__list" role="menu" ng-style="uiModel.lookupPostionStyle" ng-mouseover="onMouseOver()" ng-mouseleave="onMouseLeave()"><li ng-repeat="item in model.options" class="slds-dropdown__item slds-has-icon--left" aria-selected="{{item.selected}}" tabindex="-1" role="option"><a href="#" data-id="{{$index}}" class="slds-truncate"><svg aria-hidden="true" ng-if="item.selected" class="slds-icon slds-icon--small slds-icon--left"><use xlink:href="'+c+'/assets/icons/standard-sprite/svg/symbols.svg#task2"></use></svg><span ng-bind-html="item.value"></span></a></li></ul></div></div>'},link:function(g,f,e,h){f.on("click","a",function(j){j.preventDefault();var i=parseInt(a.element(this).attr("data-id"));h[0].onSelect(i,h[1])})}}}]).controller("PickListController",["$scope","$log",function(j,k){var h=this,d=0,c=j,g=j.model,e=!!c.width?c.width:200,i=c.uiModel={isHidden:true,alignment:"slds-dropdown--left",lookupPostionStyle:{width:e}};if(!!c.alignment&&c.alignment==="right"){i.alignment="slds-dropdown--right"}function f(){if(!g){g={option:{key:"",value:"Select ..."},options:[]};c.model=g;return}if(!g.option||!g.option.value){g.option={key:"",value:(!!c.placeHolder)?c.placeHolder:"Select ..."}}if(!g.options){g.options=[]}else{g.options.forEach(function(l){if(l.key===g.option.key){l.selected=true}else{l.selected=false}})}}f();c.wantToSelect=function(l){i.isHidden=!i.isHidden};function b(l){g.options.forEach(function(m){m.selected=false});i.isHidden=true;g.options[l]["selected"]=true;g.option=g.options[l];d=0}c.onBlur=function(){if(d===0){i.isHidden=true}};c.onMouseOver=function(){d=1};c.onMouseLeave=function(){d=0};h.onSelect=function(l,m){c.$apply(function(){b(l);m.$setViewValue(g.options[l].key);if(!!c.onChanged){c.onChanged()}})}}]);a.module("cmk.ui.pill",["cmk.web.context","ngSanitize"]).directive("cmkPill",["cmkWebContext","$log",function(b,d){var c=b.staticResourcePath;return{restrict:"EA",scope:{isHidden:"@isHidden",onRemove:"&onRemove",title:"@"},template:function(){return'<span ng-if="isHidden == 0"><span class="slds-pill"><span class="slds-pill__label" ng-bind-html="title"></span><button class="slds-button slds-button--icon-bare"><svg aria-hidden="true" class="slds-button__icon"><use xlink:href="'+c+'/assets/icons/utility-sprite/svg/symbols.svg#close"></use></svg><span class="slds-assistive-text">Remove</span></button></span></span>'},link:function(g,f,e){f.on("click","button",function(h){h.preventDefault();g.$apply(function(){g.onRemove()})})}}}])})(angular);