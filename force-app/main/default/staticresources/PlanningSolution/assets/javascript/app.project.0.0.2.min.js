(function(a){var b=[{key:"Planning",value:"slds-theme--alt-inverse"},{key:"Scheduled",value:"slds-theme--shade"},{key:"Finished",value:"slds-theme--success"},{key:"Cancelled",value:"slds-theme--shade"},{key:"Executed",value:"slds-theme--success"},{key:"In Progress",value:"slds-theme--warning"},{key:"Rejected",value:"slds-theme--error"}];a.module("app.project.model",["cmk.web.context","cmk.system.async"]).factory("projectModel",["cmkSystemAsync","cmkWebContext",function(d,c){return{getProject:function(){var e="{!$RemoteAction.ProjectRemoter.GetProject}";if(!!c.projectId){e="{!$RemoteAction.ProjectRemoter.GetProject}";return d.remoting(e,{id:c.projectId})}return{__error:"Project Id is not assigned."}}}}]);a.module("app.project",["app.project.model","ui.router","ngSanitize","cmk.svg.use","app.project.detail","app.project.service","app.project.location","app.project.job"]).config(["$stateProvider","$urlRouterProvider","cmkWebContext",function(d,e,c){e.when("","/project/detail");e.when("/project","/project/detail");e.when("/","/project/detail");d.state("project",{resolve:{projectData:["projectModel",function(f){return f.getProject()}]},url:"/project",templateUrl:c.applicationPath+"/assets/packages/project/project.html",controller:["$scope","$state","cmkWebContext","$log","projectData",function(l,f,m,o,h){var n=l;function k(p){var q=(p||"").toLowerCase();var r=_.find(b,function(s){return s.key.toLowerCase().indexOf(q)!==-1});return(!!r)?r.value:"slds-theme--shade"}function j(r,q){var s,p;if(isFinite(r)&&isFinite(q)){s=new Date(r);p=new Date(q);return s.format("/")+" - "+p.format("/")}else{return""}}function i(r){var q={};q.title=r.Title;q.supplier=r.Supplier;q.type=r.Type;q.status=r.Status;q.executeDateRange=j(r.StartDate,r.EndDate);q.serviceCount=r.ServiceCount;q.locationCount=r.LocationCount;q.jobCount=r.JobCount;return q}function g(q){var p=this;p.selDetail=(f.$current.name==="project.detail")?true:false;p.selServices=(f.$current.name==="project.services")?true:false;p.selLocations=(f.$current.name==="project.locations")?true:false;p.selJobs=(f.$current.name==="project.jobs")?true:false;p.project=q;p.statusCSS=k(q.status);return p}n.projectViewModel=new g(i(h));n.tabClicked=function(q,p){n.projectViewModel.selDetail=(q==="detail")?true:false;n.projectViewModel.selServices=(q==="services")?true:false;n.projectViewModel.selLocations=(q==="locations")?true:false;n.projectViewModel.selJobs=(q==="jobs")?true:false;f.transitionTo("project."+q)}}]})}]).controller("ProjectController",["$scope","cmkWebContext",function(c,d){c.resourcePath=!!d.staticResourcePath?d.staticResourcePath+"/":""}])})(angular);(function(b){var c="div#projectCalendar";function f(){var g=window.innerHeight-b.element("div#tab-default-1").offset().top;return(g>400)?g-150:400}function a(){b.element(c).fullCalendar({header:{right:"prev,next",left:"title"},allDayDefault:true,eventLimit:5,businessHours:true,editable:true,handleWindowResize:true,height:f()+30})}function d(m){var i=[],l,j,k,h=m.StartDate,g=m.EndDate;if((!!h&&isFinite(h))&&(!!g&&isFinite(g))){h=new Date(h);g=new Date(g);h=new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0,0);g=new Date(g.getFullYear(),g.getMonth(),g.getDate(),23,11,59,999);i.push({title:"",start:h.toISOString(),end:g.toISOString(),color:"steelblue"})}return i}function e(i){var g=d(i),h=b.element(c);h.fullCalendar("removeEvents");h.fullCalendar("addEventSource",g);if(!!i.StartDate&&isFinite(i.StartDate)){h.fullCalendar("gotoDate",i.StartDate)}}b.module("app.project.detail",["ui.router","cmk.web.context","cmk.system.async"]).config(["$stateProvider","cmkWebContext",function(h,g){h.state("project.detail",{url:"/detail",templateUrl:g.applicationPath+"/assets/packages/project/project.detail.html",controller:"ProjectDetailController"})}]).controller("ProjectDetailController",["$scope","$log","projectData","cmkWebContext",function(g,j,i,h){var k=i;g.details=[{label1:"Retailer",value1:k.Retailer,label2:"Program Id",value2:k.ProgramId},{label1:"Approver",value1:k.Approver,label2:"Group",value2:k.Group},{label1:"Owner",value1:k.Owner,label2:"Sub Group",value2:k.SubGroup},{label1:"Can Reschedule",value1:(k.CanReschedule===true)?('<span class="cm-check"><svg aria-hidden="true" class="slds-button__icon--stateful"><use xlink:href="'+h.staticResourcePath+'/assets/icons/utility-sprite/svg/symbols.svg#check"></use></svg></span>'):'<span class="cm-uncheck"></span>',label2:"Imported Locations",value2:k.ImportedLocations},{label1:"Description",value1:k.Description,label2:"Budgeted Locations",value2:k.BudgetedLocations}];g.audit=[{label1:"Created By",value1:k.CreatedBy,label2:"Created Date",value2:!isNaN(k.CreatedDate)?new Date(k.CreatedDate).toISOString():k.CreatedDate},{label1:"Last Modified By",value1:k.UpdatedBy,label2:"Last Modified Date",value2:!isNaN(k.UpdatedDate)?new Date(k.UpdatedDate).toISOString():k.UpdatedDate}];a();e(k)}])})(angular);(function(a){var c,b;a.module("app.project.job",["cmk.web.context","cmk.system.async","ui.router","ui.grid"]).factory("projectJobModel",["cmkSystemAsync","cmkWebContext",function(e,d){return{getJobs:function(f){return[]}}}]).config(["$stateProvider","cmkWebContext",function(e,d){e.state("project.jobs",{url:"/jobs",templateUrl:d.applicationPath+"/assets/packages/project/project.job.html",controller:"ProjectJobController"})}]).controller("ProjectJobController",["$scope","$state","cmkWebContext","$log","projectJobModel",function(d,g,f,h,e){}])})(angular);(function(a){var c,b;a.module("app.project.service",["cmk.web.context","cmk.system.async","ui.router","ui.grid"]).factory("projectServiceModel",["cmkSystemAsync","cmkWebContext",function(e,d){return{getServices:function(){return[]}}}]).config(["$stateProvider","cmkWebContext",function(e,d){e.state("project.services",{url:"/services",templateUrl:d.applicationPath+"/assets/packages/project/project.service.html",controller:"ProjectServiceController"})}]).controller("ProjectServiceController",["$scope","$state","cmkWebContext","$log","projectServiceModel",function(d,g,e,h,f){}])})(angular);(function(a){var c,b;a.module("app.project.location",["cmk.web.context","cmk.system.async","ui.router","ui.grid"]).factory("projectLocationModel",["cmkSystemAsync","cmkWebContext",function(e,d){return{getLocations:function(f){return[]}}}]).config(["$stateProvider","cmkWebContext",function(e,d){e.state("project.locations",{url:"/locations",templateUrl:d.applicationPath+"/assets/packages/project/project.location.html",controller:"ProjectLocationController"})}]).controller("ProjectLocationController",["$scope","$state","cmkWebContext","$log","projectLocationModel",function(d,g,f,h,e){}])})(angular);